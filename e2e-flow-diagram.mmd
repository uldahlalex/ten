graph TB
    %% E2E Test Architecture Flow
    
    subgraph Host["ğŸ’» Host Machine (Arch Linux)"]
        subgraph Build["ğŸ”¨ Build Process"]
            ReactBuild["âš›ï¸ React Build<br/>npm run build<br/>â†’ client/dist/"]
        end
        
        subgraph TestRunner["ğŸ§ª Test Execution"]
            TUnit["ğŸ§ª TUnit/NUnit<br/>E2E Test Runner<br/>C# .NET 9"]
            API["ğŸŒ .NET API Server<br/>Port: 808x<br/>Serves: API + SPA"]
        end
        
        subgraph Connection["ğŸ”— Connections"]
            WSClient["ğŸ“¡ WebSocket Client<br/>PW_TEST_CONNECT_WS_ENDPOINT<br/>ws://127.0.0.1:3000/"]
            HTTPClient["ğŸŒ HTTP Client<br/>API Requests<br/>+ JWT Auth"]
        end
    end
    
    subgraph Docker["ğŸ³ Docker Environment"]
        subgraph PWServer["ğŸ­ Playwright Server Container"]
            PWService["ğŸ­ Playwright Service<br/>mcr.microsoft.com/playwright:v1.53.0-noble<br/>Port: 3000"]
            Browsers["ğŸŒ Browser Engines<br/>â€¢ Chromium<br/>â€¢ Firefox<br/>â€¢ WebKit"]
        end
        
        subgraph TestContainers["ğŸ“¦ TestContainers (Per Test)"]
            Postgres["ğŸ˜ PostgreSQL<br/>Schema: test_{guid}<br/>Seeded Data:<br/>â€¢ 3 users<br/>â€¢ 5 tags<br/>â€¢ 5 tasks"]
        end
    end
    
    subgraph TestFlow["ğŸ”„ Test Execution Flow"]
        Step1["1ï¸âƒ£ Setup Phase<br/>â€¢ Build React<br/>â€¢ Start Playwright Server<br/>â€¢ Create Test DB"]
        Step2["2ï¸âƒ£ Test Initialization<br/>â€¢ Connect to Playwright<br/>â€¢ Start API Server<br/>â€¢ Configure Static Files"]
        Step3["3ï¸âƒ£ Browser Actions<br/>â€¢ Navigate to SPA<br/>â€¢ UI Interactions<br/>â€¢ Form Submissions"]
        Step4["4ï¸âƒ£ API Testing<br/>â€¢ HTTP Requests<br/>â€¢ Authentication<br/>â€¢ Data Validation"]
        Step5["5ï¸âƒ£ Cleanup<br/>â€¢ Close Browser<br/>â€¢ Stop API<br/>â€¢ Destroy DB"]
    end
    
    %% Connections
    ReactBuild --> API
    TUnit --> WSClient
    TUnit --> HTTPClient
    WSClient -.->|WebSocket| PWService
    HTTPClient -.->|HTTP/API| API
    PWService --> Browsers
    API -.->|Database| Postgres
    TUnit --> TestContainers
    
    %% Flow connections
    Step1 --> Step2
    Step2 --> Step3
    Step3 --> Step4
    Step4 --> Step5
    
    %% Styling
    classDef dockerClass fill:#e3f2fd,stroke:#1976d2,stroke-width:3px
    classDef hostClass fill:#f3e5f5,stroke:#7b1fa2,stroke-width:3px
    classDef flowClass fill:#fff3e0,stroke:#ff9800,stroke-width:2px
    classDef reactClass fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    
    class Docker,PWServer,TestContainers dockerClass
    class Host,Build,TestRunner,Connection hostClass
    class TestFlow,Step1,Step2,Step3,Step4,Step5 flowClass
    class ReactBuild reactClass